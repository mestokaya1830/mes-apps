
{/* <template>
  <div class="form-group">
    <label class="form-label">ğŸ‡©ğŸ‡ª Unternehmensform (Deutschland)</label>
    <select v-model="companyTypeDE" class="form-input">
      <option disabled value="">-- Bitte wÃ¤hlen --</option>
      <option v-for="type in companyTypesDE" :key="type.value" :value="type.value">
        {{ type.label }}
      </option>
    </select>

    <p class="text-sm text-gray-500 mt-1">
      AusgewÃ¤hlt: <strong>{{ companyTypeDE }}</strong>
    </p>
  </div>
</template>

<script>
export default {
  name: "CompanyTypeDE",
  data() {
    return {
      companyTypeDE: "",
      companyTypesDE: [
        { value: "einzelunternehmen", label: "Einzelunternehmen" },
        // ÅahÄ±s iÅŸletmesi â€“ en yaygÄ±n kÃ¼Ã§Ã¼k iÅŸletme tÃ¼rÃ¼ (Kleinunternehmer Â§19 UStG)
        { value: "freiberufler", label: "Freiberufler" },
        // Serbest meslek (doktor, mimar, mÃ¼hendis, yazar vb.) â€“ KDV bazen muaf
        { value: "gbr", label: "GbR (Gesellschaft bÃ¼rgerlichen Rechts)" },
        // Adi ortaklÄ±k â€“ serbest meslek sahipleri veya kÃ¼Ã§Ã¼k iÅŸletmeler
        { value: "ug", label: "UG (haftungsbeschrÃ¤nkt)" },
        // Mini GmbH â€“ dÃ¼ÅŸÃ¼k sermaye ile limited ÅŸirket
        { value: "gmbh", label: "GmbH (Gesellschaft mit beschrÃ¤nkter Haftung)" },
        // Limited ÅŸirket â€“ genelde KDV yÃ¼kÃ¼mlÃ¼sÃ¼
        { value: "ohg", label: "OHG (Offene Handelsgesellschaft)" },
        // Ticari ortaklÄ±k â€“ kÃ¼Ã§Ã¼k sayÄ±lmaz
        { value: "kg", label: "KG (Kommanditgesellschaft)" },
        // Komandit ortaklÄ±k â€“ orta veya bÃ¼yÃ¼k Ã¶lÃ§ekli iÅŸletmeler
        { value: "gmbh_co_kg", label: "GmbH & Co. KG" },
        // GmbH'nin komandit ortak olduÄŸu Ã¶zel ortaklÄ±k tÃ¼rÃ¼
        { value: "partg", label: "PartG (Partnerschaftsgesellschaft)" },
        // Profesyonel meslekler (avukat, doktor, diÅŸ hekimi, mimar vb.) iÃ§in ortaklÄ±k
        { value: "partgmbb", label: "PartGmbB (Partnerschaftsgesellschaft mit beschrÃ¤nkter Berufshaftung)" },
        // SÄ±nÄ±rlÄ± mesleki sorumluluklu ortaklÄ±k
        { value: "ek", label: "e.K. (eingetragener Kaufmann)" },
        // Tescilli tacir â€“ genelde kÃ¼Ã§Ã¼k veya orta iÅŸletmeler
        { value: "ev", label: "e.V. (eingetragener Verein)" },
        // Dernek â€“ kÃ¢r amacÄ± gÃ¼tmeyen organizasyonlar
        { value: "ggmbh", label: "gGmbH (gemeinnÃ¼tzige GmbH)" },
        // Kar amacÄ± gÃ¼tmeyen limited ÅŸirket â€“ Ã¶zel vergi durumu (Â§4 UStG)
        { value: "stiftung", label: "Stiftung" },
        // VakÄ±f â€“ genellikle kamu yararÄ±na Ã§alÄ±ÅŸan kuruluÅŸlar
        { value: "ag", label: "AG (Aktiengesellschaft)" },
        // Anonim ÅŸirket â€“ bÃ¼yÃ¼k Ã¶lÃ§ekli iÅŸletmeler
        { value: "se", label: "SE (Societas Europaea)" }
        // Avrupa ÅŸirketi â€“ uluslararasÄ± dÃ¼zeyde faaliyet gÃ¶steren bÃ¼yÃ¼k firmalar
      ]
    }
  }
}
</script>

<style scoped>
.form-group {
  margin-bottom: 1rem;
}
.form-label {
  display: block;
  font-weight: 600;
  margin-bottom: 0.25rem;
}
.form-input {
  width: 100%;
  padding: 0.4rem 0.6rem;
  border: 1px solid #ccc;
  border-radius: 6px;
}
</style> */}
{/* <div>
  <label>ğŸ‡©ğŸ‡ª Unternehmensform (Deutschland)</label>
  <select v-model="deCompanyType" @change="checkKleinunternehmerAvailability('de')">
    <option disabled value="">-- Bitte wÃ¤hlen --</option>
    <option v-for="type in companyTypesDE" :key="type.value" :value="type.value">
      {{ type.label }}
    </option>
  </select>

  <div class="mt-2">
    <label>
      <input
        type="checkbox"
        v-model="isKleinunternehmerDE"
        :disabled="!kleinunternehmerAvailableDE"
      />
      Kleinunternehmer nach Â§19 UStG
    </label>
  </div>
</div> */}

{/* <template>
  <div class="form-group">
    <label class="form-label">ğŸ‡¦ğŸ‡¹ Unternehmensform (Ã–sterreich)</label>
    <select v-model="companyTypeAT" class="form-input">
      <option disabled value="">-- Bitte wÃ¤hlen --</option>
      <option v-for="type in companyTypesAT" :key="type.value" :value="type.value">
        {{ type.label }}
      </option>
    </select>
  </div>
</template>

<script>
export default {
  name: "CompanyTypeAT",
  data() {
    return {
      companyTypeAT: "",
      companyTypesAT: [
        { value: "einzelunternehmen", label: "Einzelunternehmen" },
        // ÅahÄ±s iÅŸletmesi â€“ Kleinunternehmer olabilir (Â§6 Abs 1 Z 27 UStG)
        { value: "og", label: "OG (Offene Gesellschaft)" },
        // OHG benzeri ticari ortaklÄ±k
        { value: "kg", label: "KG (Kommanditgesellschaft)" },
        // Komandit ortaklÄ±k â€“ genelde ticari
        { value: "gmbh", label: "GmbH (Gesellschaft mit beschrÃ¤nkter Haftung)" },
        // Limited ÅŸirket â€“ KDV yÃ¼kÃ¼mlÃ¼sÃ¼
        { value: "ag", label: "AG (Aktiengesellschaft)" },
        // Anonim ÅŸirket
        { value: "genossenschaft", label: "Genossenschaft" },
        // Kooperatif â€“ tarÄ±m veya finans sektÃ¶rlerinde yaygÄ±n
        { value: "verein", label: "Verein" }
        // Dernek â€“ kar amacÄ± gÃ¼tmez
      ]
    }
  }
}
</script> */}
// <!-- Avusturya -->
// <div class="mt-6">
//   <label>ğŸ‡¦ğŸ‡¹ Unternehmensform (Ã–sterreich)</label>
//   <select v-model="atCompanyType" @change="checkKleinunternehmerAvailability('at')">
//     <option disabled value="">-- Bitte wÃ¤hlen --</option>
//     <option v-for="type in companyTypesAT" :key="type.value" :value="type.value">
//       {{ type.label }}
//     </option>
//   </select>

//   <div class="mt-2">
//     <label>
//       <input
//         type="checkbox"
//         v-model="isKleinunternehmerAT"
//         :disabled="!kleinunternehmerAvailableAT"
//       />
//       Kleinunternehmerregelung (Â§6 Abs.1 Z 27 UStG)
//     </label>
//   </div>
// </div>

{/* <template>
  <div class="form-group">
    <label class="form-label">ğŸ‡¨ğŸ‡­ Unternehmensform (Schweiz)</label>
    <select v-model="companyTypeCH" class="form-input">
      <option disabled value="">-- Bitte wÃ¤hlen --</option>
      <option v-for="type in companyTypesCH" :key="type.value" :value="type.value">
        {{ type.label }}
      </option>
    </select>
  </div>
</template>

<script>
export default {
  name: "CompanyTypeCH",
  data() {
    return {
      companyTypeCH: "",
      companyTypesCH: [
        { value: "einzelfirma", label: "Einzelfirma" },
        // ÅahÄ±s iÅŸletmesi â€“ kÃ¼Ã§Ã¼k iÅŸletme (100.000 CHF altÄ± ciroda KDV muaf)
        { value: "gmbh", label: "GmbH (Gesellschaft mit beschrÃ¤nkter Haftung)" },
        // Limited ÅŸirket
        { value: "ag", label: "AG (Aktiengesellschaft)" },
        // Anonim ÅŸirket â€“ bÃ¼yÃ¼k Ã¶lÃ§ekli
        { value: "kg", label: "Kommanditgesellschaft" },
        // Komandit ortaklÄ±k
        { value: "verein", label: "Verein" },
        // Dernek â€“ kÃ¢r amacÄ± gÃ¼tmez
        { value: "genossenschaft", label: "Genossenschaft" },
        // Kooperatif â€“ topluluk odaklÄ± iÅŸletmeler
        { value: "stiftung", label: "Stiftung" }
        // VakÄ±f â€“ kÃ¢r amacÄ± gÃ¼tmez kurum
      ]
    }
  }
}
</script> */}
// <!-- Ä°sviÃ§re -->
// <div class="mt-6">
//   <label>ğŸ‡¨ğŸ‡­ Unternehmensform (Schweiz)</label>
//   <select v-model="chCompanyType" @change="checkKleinunternehmerAvailability('ch')">
//     <option disabled value="">-- Bitte wÃ¤hlen --</option>
//     <option v-for="type in companyTypesCH" :key="type.value" :value="type.value">
//       {{ type.label }}
//     </option>
//   </select>

//   <div class="mt-2">
//     <label>
//       <input
//         type="checkbox"
//         v-model="isKleinunternehmerCH"
//         :disabled="!kleinunternehmerAvailableCH"
//       />
//       MWST-befreit (Umsatz unter 100â€™000 CHF)
//     </label>
//   </div>
// </div>

// summary
{/* <script>
export default {
  data() {
    return {
      // --- Almanya ---
      deCompanyType: "",
      isKleinunternehmerDE: false,
      kleinunternehmerAvailableDE: true,
      companyTypesDE: [
        { value: "einzelunternehmen", label: "Einzelunternehmen" },
        { value: "freiberufler", label: "Freiberufler" },
        { value: "gbr", label: "GbR" },
        { value: "ug", label: "UG (haftungsbeschrÃ¤nkt)" },
        { value: "gmbh", label: "GmbH" },
        { value: "ohg", label: "OHG" },
        { value: "kg", label: "KG" },
        { value: "gmbh_co_kg", label: "GmbH & Co. KG" },
        { value: "partg", label: "PartG" },
        { value: "partgmbb", label: "PartGmbB" },
        { value: "ek", label: "e.K." },
        { value: "ev", label: "e.V." },
        { value: "ggmbh", label: "gGmbH" },
        { value: "stiftung", label: "Stiftung" },
        { value: "ag", label: "AG" },
        { value: "se", label: "SE" }
      ],

      // --- Avusturya ---
      atCompanyType: "",
      isKleinunternehmerAT: false,
      kleinunternehmerAvailableAT: true,
      companyTypesAT: [
        { value: "einzelunternehmen", label: "Einzelunternehmen" },
        { value: "freiberufler", label: "Freiberufler" },
        { value: "og", label: "Offene Gesellschaft (OG)" },
        { value: "kg", label: "Kommanditgesellschaft (KG)" },
        { value: "gmbh", label: "GmbH" },
        { value: "ag", label: "AG" },
        { value: "genossenschaft", label: "Genossenschaft" },
        { value: "verein", label: "Verein" },
        { value: "stiftung", label: "Stiftung" }
      ],

      // --- Ä°sviÃ§re ---
      chCompanyType: "",
      isKleinunternehmerCH: false,
      kleinunternehmerAvailableCH: true,
      companyTypesCH: [
        { value: "einzelfirma", label: "Einzelfirma" },
        { value: "gmbh", label: "GmbH" },
        { value: "ag", label: "AG" },
        { value: "genossenschaft", label: "Genossenschaft" },
        { value: "stiftung", label: "Stiftung" },
        { value: "verein", label: "Verein" }
      ]
    }
  },
  methods: {
    checkKleinunternehmerAvailability(country) {
      if (country === "de") {
        const nonEligible = ["gmbh", "ohg", "kg", "gmbh_co_kg", "partgmbb", "ek", "ag", "se"]
        this.kleinunternehmerAvailableDE = !nonEligible.includes(this.deCompanyType)
        if (!this.kleinunternehmerAvailableDE) this.isKleinunternehmerDE = false
      }

      if (country === "at") {
        const nonEligible = ["gmbh", "ag", "genossenschaft"]
        this.kleinunternehmerAvailableAT = !nonEligible.includes(this.atCompanyType)
        if (!this.kleinunternehmerAvailableAT) this.isKleinunternehmerAT = false
      }

      if (country === "ch") {
        const nonEligible = ["ag", "genossenschaft", "stiftung"]
        this.kleinunternehmerAvailableCH = !nonEligible.includes(this.chCompanyType)
        if (!this.kleinunternehmerAvailableCH) this.isKleinunternehmerCH = false
      }
    }
  }
}
</script> */}
// | Ãœlke           | KÃ¼Ã§Ã¼k iÅŸletme yasasÄ±                  | Tipik uygun tÃ¼rler                   | Yasal dayanak      |
// | -------------- | ------------------------------------- | ------------------------------------ | ------------------ |
// | ğŸ‡©ğŸ‡ª Almanya   | Kleinunternehmerregelung              | Einzelunternehmen, Freiberufler, GbR | Â§19 UStG           |
// | ğŸ‡¦ğŸ‡¹ Avusturya | Kleinunternehmerregelung              | Einzelunternehmen, OG, KG            | Â§6 Abs.1 Z 27 UStG |
// | ğŸ‡¨ğŸ‡­ Ä°sviÃ§re   | MWST-Be
// | Ãœlke           | Standart KDV | Ä°ndirimli Oran(lar) | KÃ¼Ã§Ã¼k Ä°ÅŸletme Muafiyeti             |
// | -------------- | ------------ | ------------------- | ----------------------------------- |
// | ğŸ‡©ğŸ‡ª Almanya   | **19 %**     | 7 %                 | Â§19 UStG â€“ < 22 000 â‚¬/yÄ±l           |
// | ğŸ‡¦ğŸ‡¹ Avusturya | **20 %**     | 10 %, 13 %          | Â§6 Abs.1 Z 27 UStG â€“ < 35 000 â‚¬/yÄ±l |
// | ğŸ‡¨ğŸ‡­ Ä°sviÃ§re   | **8.1 %**    | 2.6 %, 3.8 %        | MWST-befreiung â€“ < 100 000 CHF/yÄ±l  |
// freiung (Umsatz < 100â€™000 CHF) | Einzelfirma, kleine GmbH             | MWSTG Art. 10      |
// computed: {
//   vatRates() {
//     switch (this.country) {
//       case "de":
//         return [0, 7, 19]
//       case "at":
//         return [0, 10, 13, 20]
//       case "ch":
//         return [0, 2.6, 3.8, 8.1]
//       default:
//         return [0]
//     }
//   }
// }

//Almnaya---------------------
// 1ï¸âƒ£ TÃ¼zel kiÅŸiler (Kapitalgesellschaften â€“ Limited/Anonim ÅŸirketler)
// GmbH â€“ Gesellschaft mit beschrÃ¤nkter Haftung (Limited ÅŸirket)
// AG â€“ Aktiengesellschaft (Anonim ÅŸirket)
// KGaA â€“ Kommanditgesellschaft auf Aktien (Hisse senetli komandit ÅŸirket)
// SE â€“ Societas Europaea (Avrupa anonim ÅŸirketi)
// OrtaklÄ±klar / ÅŸahÄ±s ÅŸirketleri (Personengesellschaften)
// OG â€“ Offene Gesellschaft (AÃ§Ä±k ticaret ortaklÄ±ÄŸÄ±)
// KG â€“ Kommanditgesellschaft (Komandit ÅŸirket)
// Einzelfirma (Tek kiÅŸilik iÅŸletme / ÅŸahÄ±s ÅŸirketi)
// GesbR â€“ Gesellschaft bÃ¼rgerlichen Rechts (Basit ortaklÄ±k)
// Serbest meslek ve diÄŸer
// Freiberufler (Serbest meslek sahibi: doktor, avukat, danÄ±ÅŸman vb.)
// Genossenschaft (Kooperatif / eG)
// Verein (Dernek â€“ kar amacÄ± gÃ¼tmeyen)


//Avusturya---------------------
// 1ï¸âƒ£ Avusturya â€“ TÃ¼zel kiÅŸiler (Kapitalgesellschaften â€“ Limited/Anonim ÅŸirketler)
// GmbH â€“ Gesellschaft mit beschrÃ¤nkter Haftung (Limited ÅŸirket)
// AG â€“ Aktiengesellschaft (Anonim ÅŸirket)
// KGaA â€“ Kommanditgesellschaft auf Aktien (Hisse senetli komandit ÅŸirket)
// SE â€“ Societas Europaea (Avrupa anonim ÅŸirketi)
// OrtaklÄ±klar / ÅŸahÄ±s ÅŸirketleri (Personengesellschaften)
// OG â€“ Offene Gesellschaft (AÃ§Ä±k ticaret ortaklÄ±ÄŸÄ±)
// KG â€“ Kommanditgesellschaft (Komandit ÅŸirket)
// Einzelfirma (Tek kiÅŸilik iÅŸletme / ÅŸahÄ±s ÅŸirketi)
// GesbR â€“ Gesellschaft bÃ¼rgerlichen Rechts (Basit ortaklÄ±k)
// Serbest meslek ve diÄŸer
// Freiberufler (Serbest meslek sahibi: doktor, avukat, danÄ±ÅŸman vb.)
// Genossenschaft (Kooperatif / eG)
// Verein (Dernek â€“ kar amacÄ± gÃ¼tmeyen)

//Isvicre---------------------
// 1ï¸âƒ£ Isvicre â€“ TÃ¼zel kiÅŸiler (Kapitalgesellschaften â€“ Limited/Anonim ÅŸirketler)
// GmbH â€“ Gesellschaft mit beschrÃ¤nkter Haftung (Limited ÅŸirket)
// AG â€“ Aktiengesellschaft (Anonim ÅŸirket)
// KGaA â€“ Kommanditgesellschaft auf Aktien (Hisse senetli komandit ÅŸirket)
// SE â€“ Societas Europaea (Avrupa anonim ÅŸirketi)
// OrtaklÄ±klar / ÅŸahÄ±s ÅŸirketleri (Personengesellschaften)
// OG â€“ Offene Gesellschaft (AÃ§Ä±k ticaret ortaklÄ±ÄŸÄ±)
// KG â€“ Kommanditgesellschaft (Komandit ÅŸirket)
// Einzelfirma (Tek kiÅŸilik iÅŸletme / ÅŸahÄ±s ÅŸirketi)
// GesbR â€“ Gesellschaft bÃ¼rgerlichen Rechts (Basit ortaklÄ±k)
// Serbest meslek ve diÄŸer
// Freiberufler (Serbest meslek sahibi: doktor, avukat, danÄ±ÅŸman vb.)
// Genossenschaft (Kooperatif / eG)
// Verein (Dernek â€“ kar amacÄ± gÃ¼tmeyen)






// Rastgele tarih Ã¼retme
const randDate = () => {
  const month = String(Math.floor(Math.random() * 12) + 1).padStart(2, '0')
  const day = String(Math.floor(Math.random() * 28) + 1).padStart(2, '0')
  return `2025-${month}-${day}`
}

// Rastgele miktar ve fiyat
const randQty = () => Math.floor(Math.random() * 9) + 1
const randPrice = () => Number((Math.random() * 200 + 20).toFixed(2))

// YardÄ±mcÄ±lar
const rand = (arr) => arr[Math.floor(Math.random() * arr.length)]
const randEmail = (name) => `${name.toLowerCase()}${Math.floor(Math.random() * 100)}@example.com`
const randPhone = () => `+49${Math.floor(1000000000 + Math.random() * 8999999999)}`

// ---------- CUSTOMER INSERT ----------
const insertCustomer = db.prepare(`
  INSERT INTO customers (
    customer_type, company_name, first_name, last_name, email, phone,
    address, postal_code, city, country, tax_number, vat_id, is_active
  ) VALUES (
    @customer_type, @company_name, @first_name, @last_name, @email, @phone,
    @address, @postal_code, @city, @country, @tax_number, @vat_id, @is_active
  )
`)

const firstNames = ['Anna','Lukas','Mia','Jonas','Lea','Paul','Sophie','Niklas','Klara','Felix']
const lastNames = ['MÃ¼ller','Schmidt','Becker','Fischer','Weber','Wagner','Koch','Richter','Klein']
const cities = ['Berlin','Hamburg','MÃ¼nchen','KÃ¶ln','DÃ¼sseldorf','Leipzig','Frankfurt','Stuttgart','Bremen']

const customerList = []

for (let i = 1; i <= 30; i++) {
  const first_name = rand(firstNames)
  const last_name = rand(lastNames)
  const city = rand(cities)
  const postal_code = `${Math.floor(10000 + Math.random() * 89999)}`
  const street = `MusterstraÃŸe ${Math.floor(Math.random() * 80) + 1}`
  const tax_number = `DE${Math.floor(100000000 + Math.random() * 899999999)}`
  const vat_id = `DE${Math.floor(100000000 + Math.random() * 899999999)}`

  const customer = {
    customer_type: 'Firma',
    company_name: `${rand(lastNames)} & Partner`,
    first_name,
    last_name,
    email: randEmail(first_name),
    phone: randPhone(),
    address: street,
    postal_code,
    city,
    country: 'Deutschland',
    tax_number,
    vat_id,
    is_active: 1
  }

  insertCustomer.run(customer)
  customerList.push(customer)
}

//insert
const insertInvoice = db.prepare(`
  INSERT INTO invoices (
    date, service_date, currency, terms, is_active, positions,
    customer, tax_options, summary
  ) VALUES (
    @date, @service_date, @currency, @terms, @is_active, @positions,
    @customer, @tax_options, @summary
  )
`)

for (let i = 1; i <= 100; i++) {
  const customer = customerList[Math.floor(Math.random() * customerList.length)]
  const invoiceDate = randDate()
  const serviceDate = randDate()
  const isSmallCompany = Math.random() < 0.2

  // TERMS
  const terms = {
    payment_terms: 14,
    payment_conditions: 'Zahlbar innerhalb von 14 Tagen.',
    early_payment: false,
    early_payment_percentage: 2,
    early_payment_days: 7
  }

  // POSITIONS
  const qty = randQty()
  const price = randPrice()
  const vat = isSmallCompany ? 0 : 19
  const vat_unit = Number(((price * vat) / 100).toFixed(2))
  const unit_total = Number((price + vat_unit).toFixed(2))

  const positions = [
    {
      id: 1,
      title: 'Dienstleistung',
      description: 'Allgemeine ServicetÃ¤tigkeit',
      service_period_start: randDate(),
      service_period_end: randDate(),
      unit: 'Stk',
      quantity: qty,
      price,
      vat,
      vat_unit,
      unit_total: Number((qty * unit_total).toFixed(2))
    }
  ]

  const subtotal = Number((qty * price).toFixed(2))
  const vat_amount = Number((qty * vat_unit).toFixed(2))
  const total = Number((qty * unit_total).toFixed(2))

  // TAX OPTIONS
  const tax_options = {
    is_small_company: isSmallCompany,
    is_reverse_charge: false,
    is_eu_delivery: false
  }

  // SUMMARY
  const summary = {
    subtotal,
    vat_amount,
    total,
    paid_amount: 0, // Ã–demeler ayrÄ± tabloda tutulacak
    outstanding: total
  }

  insertInvoice.run({
    date: invoiceDate,
    service_date: serviceDate,
    currency: 'EUR.de-DE',
    terms: JSON.stringify(terms),
    is_active: 1,
    positions: JSON.stringify(positions),
    customer: JSON.stringify(customer),
    tax_options: JSON.stringify(tax_options),
    summary: JSON.stringify(summary)
  })
}


