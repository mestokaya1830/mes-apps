function randomDate(start, end) {
  const date = new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime()))
  return date.toISOString().split('T')[0] // YYYY-MM-DD
}

const startDate = new Date()
startDate.setFullYear(startDate.getFullYear() - 5)
const endDate = new Date()

// Date alanı boş olan 30 customer seç
const customers = db
  .prepare(
    `
  SELECT id
  FROM customers
  WHERE date IS NULL OR date = ''
  LIMIT 30
`
  )
  .all()

const updateStmt = db.prepare(`
  UPDATE customers
  SET date = ?
  WHERE id = ?
`)

const transaction = db.transaction((rows) => {
  for (const row of rows) {
    updateStmt.run(randomDate(startDate, endDate), row.id)
  }
})

transaction(customers)